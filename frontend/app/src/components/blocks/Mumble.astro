---
import { getLangFromUrl, useTranslations, useTranslatedPath } from '@i18n/utils';

const lang = getLangFromUrl(Astro.url);
const t = useTranslations(lang);
const translatePath = useTranslatedPath(lang);

interface Props {
    is_friend?:  boolean;
}

const {
    is_friend = false,
} = Astro.props

import { marked } from 'marked';
import { renderer } from '@helpers/marked';

import FlexInline from '@components/compositions/FlexInline.astro';

import ComponentBlock from '@components/blocks/ComponentBlock.astro';

import MumbleIcon from '@components/icons/MumbleIcon.astro';
import MumbleConnectButton from './MumbleConnectButton.astro';
import Flexblock from '@components/compositions/Flexblock.astro';
---

<ComponentBlock
    width='narrow'
>
    <FlexInline justification='space-between'>
        <FlexInline class="[ grow items-center ]">
            <a href="https://www.mumble.info/downloads/" target="_blank" rel="nofollow noopener noreferrer">
                <MumbleIcon />
            </a>
            <Flexblock gap='0'>
                <p set:html={marked.parseInline(t('mumble_details'), { renderer })} />
                <small set:html={marked.parseInline(t('mumble_tutorial'), { renderer })} />
            </Flexblock>
        </FlexInline>
        
        <MumbleConnectButton is_friend={is_friend} />
    </FlexInline>
</ComponentBlock>