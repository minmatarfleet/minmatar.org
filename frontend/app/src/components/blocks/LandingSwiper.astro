---
interface Props {
    swiper_selector?:   string;
    pagination?:        boolean;
    gap?:               number;
    initial_slide?:     number;
    align?:             'start' | 'center' | 'end';
}

const {
    swiper_selector = '.swiper',
    pagination = true,
    gap = 5,
    initial_slide = 0,
    align = 'start',
} = Astro.props

import FlexInline from '@components/compositions/FlexInline.astro';
---

<FlexInline
    class:list={['swiper-wrapper select-none', `!items-${align}`]}
    gap='0'
    x-data={`{
        swiper: null,
        corporation_pagination(index) {
            return this.pagination_icons[index]
        },
        init() {
            this.swiper = new Swiper('${swiper_selector}', {
                initialSlide: ${initial_slide},
                slidesPerView: "auto",
                watchSlidesVisibility: true,
                spaceBetween: ${gap},
                pagination: ${pagination ? JSON.stringify({
                    clickable: true,
                    dynamicBullets: true,
                    el: ".swiper-pagination",
                }) : JSON.stringify(false)},
                loop: false,
                fadeEffect: {
                    crossFade: true
                },
                navigation: {
                    nextEl: '${swiper_selector}-button-next',
                    prevEl: '${swiper_selector}-button-prev',
                },
            });
        }
    }`}
>
    <slot />
</FlexInline>

{pagination && <div class="swiper-pagination"></div>}

<style lang="scss">
    :global(.swiper-pagination-bullet) {
        --swiper-pagination-bullet-border-radius: 0;
    }

    .swiper-pagination {
        --swiper-pagination-color: var(--fleet-yellow);
        --swiper-pagination-bullet-inactive-color: var(--highlight);
        --swiper-pagination-bullet-inactive-opacity: 1;
    }

     .swiper-wrapper {
        flex-wrap: nowrap;
        align-items: flex-start;
     }
</style>