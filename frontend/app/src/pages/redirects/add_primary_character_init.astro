---
import { i18n } from '@helpers/i18n'
const { translatePath } = i18n(Astro.url)

import { get_api_url, get_app_url } from '@helpers/env'

const redirect = Astro.url.searchParams.get('redirect')

if (redirect)
    Astro.cookies.set('redirect_after_add_primary_pilot', redirect, { path: '/' })

return Astro.redirect(`${get_api_url()}/api/eveonline/characters/add?redirect_url=${get_app_url()}${translatePath('/redirects/add_primary_character')}&token_type=Basic`)
---