---
import { getLangFromUrl, useTranslations } from '@i18n/utils';

const lang = getLangFromUrl(Astro.url);
const t = useTranslations(lang);

import type { StructureType } from '@dtypes/api.minmatar.org'

const location = Astro.url.searchParams.get('location')
const timer = Astro.url.searchParams.get('timer')
const alliance_id = parseInt(Astro.url.searchParams.get('alliance_id'))
const alliance_name = Astro.url.searchParams.get('alliance_name')
const structure_type = Astro.url.searchParams.get('structure_type') as StructureType
const message = Astro.url.searchParams.get('message')

import { get_item_icon, get_alliance_logo } from '@helpers/eve_image_server';
import { get_structure_id } from '@helpers/eve';

const STRUCTURE_ICON = get_item_icon(get_structure_id(structure_type))

import Flexblock from '@components/compositions/Flexblock.astro';
import FixedFluid from '@components/compositions/FixedFluid.astro';
import Badge from '@components/blocks/Badge.astro';
---

<Flexblock>
    <p set:html={message} />

    <Badge
        title={location}
        image={STRUCTURE_ICON}
    >
        <small>{timer}</small>
    </Badge>
</Flexblock>